# 腾讯课堂: 自底而上探索工程化

## webpack 内部模块机制
### webpack 构建原理(模块机制的实现)

webpack 的打包过程:

1. webpack 从入口文件出发, 通过import语句深度优先遍历, 构建所有的模块依赖树
2. 将每个模块文件进行处理, 使用`function`进行作用域隔离
3. 按照引入顺序, 将模块处理成一个文件
4. 把暴露出来的模块变量保存到一个`module`中, 类似于一个变量仓库, 后续读取变量从仓库中获取

仓库的工作:

1. 按照顺序执行模块
2. 保存模块导出的值
3. 获取模块引入的值

内部的主流程:

webpack:
    config => 

1. 初始化配置: 内部的默认配置, 合并用户传入的配置 => webpack config
   1. 获取用户配置(注册钩子()=> {})
   2. 构建默认配置(注册钩子()=> {})
   3. 合并配置(注册钩子()=> {})
2. 初始化, 文件读写, 分析路劲路径, 配置webpack

### tapable 构建流程管控

webpack 内部 管理构建流程

不同的阶段执行不同的事情, 然后通知系统(tapable)

tapable: 管理整个webpack的执行流程

1. 不同的处理逻辑(串行, 同步, 异步, 并行)
2. 不同阶段执行不同的通知
3. 执行对应阶段的任务

tap => 订阅对应阶段的过程
call => 调用对应阶段的所有执行
    编译: 性能优化, 控制流程的优化

## 代码编译 与 AST 

webpack:
    组织代码
    代码编译 兼容不同的语言
        ts => js
        sass, less => css
        es => es5
        代码压缩

