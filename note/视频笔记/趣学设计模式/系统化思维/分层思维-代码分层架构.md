# 分层思维:代码分层架构

软件程序的两个层面需求:

- 功能性需求: 文件上传, 查询等具体功能
- 非功能性需求: 性能, 安全, 容错, 本地化, 国际化等

软件架构的三要素: 代码, 代码之间的关系和两者各自的属性. 

最经典的软件架构就是分层架构.

## 代码分层架构

软件部署的分层架构主要包含四个部分:

- 客户端层(Client): 浏览器或者App
- 网页服务器(Web Server): 实现程序的运行逻辑
- 应用服务缓存(Cache): 加速访问存储的数据
- 数据层(DB): 存储数据

软件分层架构是通过层来隔离不同的关注点(变化相似的地方), 以此来解决不同需求变化的问题. 

主要理解: 代码分层架构

代码分层架构就是将软件'元素'(代码)按照'层'(代码关系)的方式组织起来的一种结构.

分层架构核心原则是: 让数据在层与层之间流通.

代码分层主要是为了解决两个问题: 

1. 如何快速拆解功能
2. 如何提升代码的可扩展性.

### 1. 通过分层拆解问题

比如将一个"通过HTTP想服务器发送字符串"可以拆解为:

- 如何创建HTTP链接
- 如何发送字符串
- 如何关闭连接

然后对于每个子问题都进一步进行拆分. 

代码分层是一种拆解复杂问题的好方法

### 2. 通过分层来提升代码的可扩展性

分层架构可以把复杂的逻辑分为多个层, 有利于: 

- 组件自身的复用性
- 更容易做服务的横向扩展


代码分层架构设计主要为了实现: 责任分离, 解耦, 组件复用和标准制定.

代码分层架构设计的劣势:

- 开发成本变高
- 性能降低
- 代码复杂度增加
