# 二. 编程语言的新潮流

## 语言的设计

语言可以按分类标准来分成不同的语言. 比如js就被分为客户端语言, java可以被分为服务端语言. 

另外, 也可以按照运行状态分为动态语言(运行时才确定结果的语言)和静态语言(编译式语言)

Java/Go就是偏向静态, Ruby/JavaScript则偏向动态

### 静态与动态

- 静态: 无需实际运行, 仅根据程序代码就能确定结果
- 动态: 只有到了运行时才能确定结果

无论任何程序都或多或少包含了动态的特性. 如果一个程序完全是静态的话, 那就意味着只需要对代码进行字面分析就好了. 实际上编程语言多多少少都具备动态性, 所谓动态还是静态更多是这种对语言的功能进行了多少的限制. 或者范阔来说, 对动态功能进行了多少积极的强化. 实际上我们讨论的是语言的这种设计方案. 

比如, 面向对象的语言都会被具备多台或者动态绑定的性质. 即, 根据存放在变量中的对象的实际性质, 自动选择一种合适的处理方式. 这样的功能是面向对象编程的本质. 

属于动态的编程语言, 动态的部分主要是指运行模式和类型. 这两个是相互独立的概念. 但是采用动态类型的语言, 其运行模式也具有动态的倾向; 反之, 在静态语言中, 运行模式在运行时的灵活性也会受到一定的限制. 

### 动态运行模式

所谓的动态运行模式, 简单来说, 就是运行中的程序能够识别自身, 并对自身进行操作. 对程序吱声进行操作的编程, 就是元编程. 

在Ruby和js中, 元编程是非常自然的. 比如查询某个对象拥有哪些方法, 或者在运行时对类和方法进行定义. 这些都是理所当然的. 

另一方面, 在java中, 类似的元编程手法, 是通过反射API来实现的. 虽然对类进行取出, 操作等功能都是可以做到的, 但是远非js中那样自由. 

GO也是如此, 通过reflect包可以获取程序的运行时信息, 但是无法实现进一步的元编程功能. 

### 何谓类型

类型, 一般来说, 指的是对某个数据具有的性质所进行的描述. 例如, 他的结构是怎样的, 它可以进行哪些操作, 等等. 动态类型的立场是数据拥有类型, 且只有数据拥有类型. 而静态类型的立场是数据拥有类型, 而存放数据的变量, 表达式也拥有类型, 且类型时在编译时固定的. 

然而, 即便是静态类型, 由于多台的存在, 也必须具备动态的性质. 因此需要追加: 实际数据的类型, 是静态指定的类型的子类型, 是指具有集成关系, 或者拥有同样的接口, 即静态类型与数据的类型在系统上"拥有同一性质". 

### 静态类型的优点

- 容易发现bug
- 编译时可以获得更多的调优信息, 从而提高程序的性能(能通过JIT提高动态类型的速度)

### 动态类型的有点

- 简洁和灵活

### 鸭子类型

- 看着像鸭子, 那就是鸭子

### Structural Subtyping

Go中没有继承关系, 某个类型的变量是否可以赋予另一种类型的数据, 是由两个类型是否拥有共通的方法所决定的. 

例如, 对于A型变量, 只要数据拥有A型所提供的所有方法, 那么这个数据就可以赋值给该变量, 这样的以类型的结构来确定可代换性的类型关系, 就是结构子类型(Structural Subtyping). 另一方面, 想java, 这样根据声明拥有继承关系的类型具有可代换性的类型关系, 被称为义子类型(Nominal Subtyping)

在结构子类型中, 类型的声明式必要的, 但由于并不需要根据事先的声明来确定类型之间的关系, 因此可以实现鸭子类型编程. 增加了对类型的描述, 但却可以同时获得鸭子类型带来的灵活性, 以及静态编译带来类型检查这两个有点.

## GO

- 2007 火热
- 取代C/C++的领域的新的系统编程语言
- 针对新的网络, 多核, 大规模集群的新情况
- 语言层面的并发设计
- GC
- 系统编程语言, 现代版的C语言

## Dart

- 取代Javascript
- 结构化, 并且灵活
- 要让Dart对程序员更加自然和友好
- 构成Dart的全部语言机制都不应该对高速运行和快速启动产生妨碍
- 适应全平台
- 现代浏览器可用
- 基于类的对象系统
- 非强制性静态类型

